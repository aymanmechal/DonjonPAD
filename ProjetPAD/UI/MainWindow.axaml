<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:ProjetPAD.UI.Converters"
        xmlns:models="clr-namespace:ProjetPAD.Models"
        x:Class="ProjetPAD.UI.MainWindow"
        Width="900" Height="600"
        Title="Projet PAD">

    <!-- CONVERTERS -->
    <Window.Resources>
        <conv:MissionStatusConverter x:Key="MissionStatusConverter"/>
    </Window.Resources>

    <Grid RowDefinitions="Auto,*" ColumnDefinitions="2*,3*" Margin="10">
        
        <!-- HEADER -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Spacing="15">
            <TextBlock x:Name="GoldText"/>
            <TextBlock x:Name="FoodText"/>
            <TextBlock x:Name="PhaseText"/>
            <Button Content="Phase suivante" Click="OnNextPhase"/>
            <Button Content="Héros" Click="OnHeroesClick"/>
            <Button Content="Marchand" Click="OnMerchant"/>
            <Button x:Name="RecruitmentButton"
                    Content="Recrutement"
                    IsVisible="False"
                    Click="OnRecruitmentClick"/>
        </StackPanel>
        
        <!-- HEROES -->
        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,10,10,0">
            <TextBlock Text="Héros" FontSize="18"/>
            <ListBox x:Name="HeroesList" SelectionMode="Multiple" SelectionChanged="OnSelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate x:DataType="models:Hero">
                        <Border Padding="6" Margin="2" Background="#2E2E2E" CornerRadius="4">
                            <StackPanel>
                                <TextBlock FontWeight="Bold" Text="{Binding Name}"/>
                                <TextBlock FontSize="12" Text="{Binding Health, StringFormat='PV : {0}'}"/>
                                <TextBlock FontSize="12" Text="{Binding Fatigue, StringFormat='Fatigue : {0}'}"/>
                                <TextBlock FontSize="12" Text="{Binding Power, StringFormat='Puissance : {0}'}"/>
                                <TextBlock FontSize="12" Foreground="Orange"
                                           Text="{Binding IsOnMissionProperty, Converter={StaticResource MissionStatusConverter}}"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>

        <!-- MISSIONS -->
        <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,10,0,0">
            <TextBlock Text="Missions" FontSize="18"/>
            <ListBox x:Name="MissionsList" Height="350" SelectionChanged="OnSelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate x:DataType="models:Mission">
                        <Border Padding="6" Margin="2" Background="#1E1E1E" CornerRadius="4">
                            <StackPanel>
                                <TextBlock FontWeight="Bold" Text="{Binding Name}"/>
                                <TextBlock FontSize="12" Text="{Binding Description, FallbackValue='Pas de description'}" TextWrapping="Wrap"/>
                                <TextBlock FontSize="12" Text="{Binding Difficulty, StringFormat='Difficulté : {0}'}"/>
                                <TextBlock FontSize="12" Text="{Binding RewardFood, StringFormat='Nourriture : {0}'}"/>
                                <TextBlock FontSize="12" Text="{Binding RewardGold, StringFormat='Or : {0}'}"/>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <TextBlock x:Name="ChanceText" Margin="0,10,0,0" FontSize="16" FontWeight="Bold"/>
            <Button Content="Lancer la mission" Margin="0,10,0,0" Click="OnDoMission"/>
            <TextBlock x:Name="ResultText" Margin="0,10,0,0" TextWrapping="Wrap"/>
        </StackPanel>

    </Grid>
</Window>
